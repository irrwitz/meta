{% extends "base.html" %}

{% block search %}
<form id="search-form" action="/search" method="POST">
  <div class="form-group row mb-0">
    <div class="col-sm-2">
      <a class="pl-3" href="/">Pacs / RIS Crawler</a>
    </div>
    <div class="col">
      <div class="form-group">
          <div class="input-group input-group-sm mb-3">
              <input type="text" class="form-control form-control-sm" placeholder="e.g. Lungenkarzinom" id="search-input" name="query"
                value="{{ params.query }}" autofocus>
              <div class="input-group-append">
                <button class="btn btn-primary" type="submit">Search in RIS Reports</button>
              </div>
            </div>
        <small class="form-text text-muted">
          <div class="d-inline"><a data-toggle="collapse" data-target="#search-details" href="#">Show more inputs</a></div>
          <div class="d-inline pl-4"><a class="text-dark" target="_blank" href="/transfers">Transfer progress <span class="oi oi-external-link small"></span></a></div>
          <div class="d-inline pl-4"><a class="text-dark" target="_blank" href="/tasks">Download progress <span class="oi oi-external-link small"></span></a></div>
        </small>

      </div>
    </div>
    <div class="col-sm-3">
        <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Universitätsspital Basel" style="height:34px">
        <small class="pt-1 mb-0"><p>Klinik für Radiologie und Nuklearmedizin</p></small>
      </div>
  </div>
  <div id="search-details" class="pb-2 small collapse">
    <div class="form-group row col-sm-10">
      <div class="col">
        <label for="patientname-input">Patient Name</label>
        <input class="form-control form-control-sm" type="text" id="patientname-input" name="PatientName" value="{{ params.PatientName }}">
      </div>
      <div class="col">
        <label for="patientid-input" class="col-form-label">Patient Id</label>
        <input class="form-control form-control-sm" type="text" id="patientid-input" name="PatientID" value="{{ params.PatientID }}">
      </div>
    </div>
    <div class="form-group row col-sm-10 ">
      <div class="col">
        <label for="accessionnumber-input" class="col-form-label">Accession Number</label>
        <input class="form-control form-control-sm" type="text" id="accessionnumber-input" name="AccessionNumber" value="{{ params.AccessionNumber }}">
      </div>
      <div class="col">
        <label for="studydescription-input" class="col-form-label">Study Description</label>
        <input class="form-control form-control-sm" type="text" placeholder="e.g. CT Schaedel" id="studydescription-input" name="StudyDescription"
          value="{{ params.StudyDescription }}">
      </div>
    </div>

    <div class="form-group row col-sm-10 ">
      <div class="col">
        <label for="modality1" class="col-form-label">Modality</label>
      </div>
    </div>
    <div class="form-group row col-sm-10">
      <div class="col">
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality1" name="Modality" value="CT" {% if 'CT' in modalities %} checked
            {% endif %}>
          <label class="form-check-label" title="Computer Tomography">CT</label>
        </div>
        <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality2" name="Modality" value="MR" {% if 'MR' in modalities %} checked
            {% endif %}> MR</label>
        <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality11" name="Modality" value="PT" {% if 'PT' in modalities %} checked
            {% endif %}> PT</label>
        <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality3" name="Modality" value="CR" {% if 'CR' in modalities %} checked
            {% endif %}> CR</label>
        <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality4" name="Modality" value="XA" {% if 'XA' in modalities %} checked
            {% endif %}> XA</label>
        <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality5" name="Modality" value="SR" {% if 'SR' in modalities %} checked
            {% endif %}> SR</label>
        <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality6" name="Modality" value="NM" {% if 'NM' in modalities %} checked
            {% endif %}> NM</label>
        <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality7" name="Modality" value="MG" {% if 'MG' in modalities %} checked
            {% endif %}> MG</label>
        <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality8" name="Modality" value="US" {% if 'US' in modalities %} checked
            {% endif %}> US</label>
        <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality9" name="Modality" value="DX" {% if 'DX' in modalities %} checked
            {% endif %}> DX</label>
        <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality10" name="Modality" value="RF" {% if 'RF' in modalities %} checked
            {% endif %}> RF</label>
        <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality12" name="Modality" value="OT" {% if 'OT' in modalities %} checked
            {% endif %}> OT</label>
        <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality13" name="Modality" value="PR" {% if 'PR' in modalities %} checked
            {% endif %}> PR</label>
        <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality14" name="Modality" value="KO" {% if 'KO' in modalities %} checked
            {% endif %}> KO</label>
        <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality15" name="Modality" value="SC" {% if 'SC' in modalities %} checked
            {% endif %}> SC</label>
        <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality16" name="Modality" value="SD" {% if 'SD' in modalities %} checked
            {% endif %}> SD</label>
        <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality17" name="Modality" value="PX" {% if 'PX' in modalities %} checked
            {% endif %}> PX</label>
        <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality18" name="Modality" value="GEMS PET RAW" {% if 'GEMS PET RAW'
            in modalities %} checked {% endif %}> GEMS PET RAW</label>
        <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality19" name="Modality" value="xa" {% if 'xa' in modalities %} checked
            {% endif %}> xa</label>
        <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality20" name="Modality" value="DR" {% if 'DR' in modalities %} checked
            {% endif %}> DR</label>
        <label class="form-check-inline">
          <input class="form-check-input" type="checkbox" id="modality21" name="Modality" value="CR/DX" {% if 'CR/DX' in modalities
            %} checked {% endif %}> CR/DX</label>
      </div>
    </div>
    <div class="form-group row col-sm-10">
      <div class="col-sm-2">
        <label for="start-date-picker" class="col-form-label form-control-sm">Start Date</label>
        <input class="form-control form-control-sm" type="text" id="start-date-picker" name="StartDate" value="{{ params.StartDate }}">
      </div>
      <div class="col-sm-2">
        <label for="end-date-picker" class="col-form-label form-control-sm">End Date</label>
        <input class="form-control form-control-sm" type="text" id="end-date-picker" name="EndDate" value="{{ params.EndDate}}">
      </div>

      <div class="col justify-content-end align-self-end">
        <button type="submit" class="btn btn-primary btn-sm mr-3">Search</button>
      </div>
    </div>
  </div>

  <div class="alert alert-danger small {% if not error %} d-none {% endif %}" role="alert">
    <strong>Error:</strong> {{error}}
    <br>
    <small>{{trace}}</small>
  </div>
  <input type="hidden" name="offset" value="{{offset}}">
  <input type="hidden" name="page" value="{{page}}">
</form>

{% endblock %}